(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(70)},39:function(e,t,n){},40:function(e,t,n){},58:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),c=n.n(i),s=(n(39),n(11)),o=n(1),u=n(3),l=n(5),g=n(4),p=n(6),h=(n(40),n(13)),m=n(14),d=n.n(m),f=function e(){var t=this;Object(o.a)(this,e),this.test=function(){return"test works"},this.searchRecipes=function(e){return t.service.post("/search/"+e).then(function(e){return console.log("the response in the component >>>>>>>> ",e.data),e.data})},this.getRecipeSummary=function(e){return t.service.get("/".concat(e,"/information")).then(function(e){return e.data})},this.getRecipeIngredients=function(e){return t.service.get("/".concat(e,"/ingredients")).then(function(e){return e.data})},this.getRecipeInstructions=function(e){return t.service.get("/".concat(e,"/instructions")).then(function(e){return e.data})};var n=d.a.create({baseURL:"/api/recipes",withCredentials:!0});this.service=n},v=function e(){var t=this;Object(o.a)(this,e),this.addIngredients=function(e,n,a,r){return t.service.post("/addRecipeAndIngredients",{theIngredients:e,recipeApiID:n,recipeName:a,recipeCost:r}).then(function(e){return e.data})},this.grabIngredients=function(){return t.service.get("/getIngredients").then(function(e){return e.data})},this.grabUserAndCart=function(){return t.service.post("/usersCart").then(function(e){return e.data})},this.grabIngredientInfo=function(e){return t.service.get("/ing/".concat(e)).then(function(e){return e.data})},this.toggleIngredient=function(e,n,a){return t.service.post("/ing/toggle/",{ingID:e,currentStatus:n,recipeID:a}).then(function(e){return e.data})},this.checkout=function(){return t.service.post("/checkout").then(function(e){return e.data})};var n=d.a.create({baseURL:"/api/cart",withCredentials:!0});this.service=n},I=(n(58),n(12));var E=function(e){return r.a.createElement("div",{className:"Navbar"},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(I.c,{to:"/"},"Home"),e.theUser&&r.a.createElement(I.c,{to:"/cart"},"Cart"))),r.a.createElement("div",null,!e.theUser&&r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return e.toggleForm("login")}}," Login "),r.a.createElement("button",{onClick:function(){return e.toggleForm("signup")}},"Sign Up")),e.theUser&&r.a.createElement("span",null,r.a.createElement("span",null,e.theUser.username),r.a.createElement("button",{onClick:function(){e.pleaseLogOut().then(function(){e.getUser()})}},"Log Out "))))};n(63),n(64),n(65);var b=function(e){return r.a.createElement(I.b,{to:"recipes/summary/".concat(e.recipeID)},e.recipeTitle)},y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.searchRecipe=function(e){e.preventDefault();var t=n.state.recipeName;n.service.searchRecipes(t).then(function(e){console.log("==============",e),n.setState({searchResults:e.results})})},n.displayRecipeSearchResults=function(){return n.state.searchResults.map(function(e,t){return r.a.createElement("div",{key:t,className:"recipe-search-result"},r.a.createElement(b,{recipeID:e.id,recipeTitle:e.title}))})},n.state={recipeName:"",searchResults:[]},n.service=new f,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"recipe-search-bar"},r.a.createElement("h3",null,"Look Up Recipe"),r.a.createElement("form",{className:"recipe-search-form",onSubmit:this.searchRecipe},r.a.createElement("input",{className:"recipe-search-input",value:this.state.recipeName,name:"recipeName",onChange:this.handleChange}),r.a.createElement("button",null,"Submit")),this.displayRecipeSearchResults())}}]),t}(a.Component);var C=function(e){return r.a.createElement("div",{className:"Main"},r.a.createElement(y,e))},S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).getRecipeSummary=function(){n.props.foodService.getRecipeSummary(n.recipeID).then(function(e){n.setState({theTitle:e.title,theIngredients:e.ingredients,theInstructions:e.instructions,theTags:e.tags,theCost:e.cost,ready:!0},function(){return console.log("theThing",e)})})},n.displayRecipeIngredients=function(){return n.state.theIngredients.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",{className:"ingredient-name"},e.name," / "),r.a.createElement("span",{className:"ingredient-amount-us"},e.usAmount," ",e.usUnit," / "))})},n.displayRecipeInstructions=function(){return n.state.theInstructions.map(function(e,t){return r.a.createElement("li",{key:t},e.step)})},n.displayRecipeTags=function(){return n.state.theTags.map(function(e,t){return r.a.createElement("li",{key:t},e)})},n.addIngredientsToCart=function(){console.log(n.state.theIngredients,n.recipeID,n.state.theTitle),n.props.cartService.addIngredients(n.state.theIngredients,n.recipeID,n.state.theTitle,n.state.theCost)},n.state={theTitle:"",theIngredients:[],theInstructions:[],theTags:[],theCost:0,ready:!1},n.recipeID=n.props.match.params.recipeID,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getRecipeSummary()}},{key:"render",value:function(){return this.state.ready?r.a.createElement("div",null,r.a.createElement("div",{className:"recipe-name"},r.a.createElement("h2",null,this.state.theTitle)),r.a.createElement("div",{className:"recipe-ingredient-list"},r.a.createElement("h3",null,"Ingredients"),this.displayRecipeIngredients()),r.a.createElement("div",{className:"recipe-directions"},r.a.createElement("h3",null,"Directions"),r.a.createElement("ol",null,this.displayRecipeInstructions())),r.a.createElement("div",{className:"recipe-tags"},r.a.createElement("h3",null,"Tags"),r.a.createElement("ol",null,this.displayRecipeTags())),this.props.theUser&&r.a.createElement("button",{onClick:this.addIngredientsToCart},"Add Ingredients")):r.a.createElement("div",null,"Loading...")}}]),t}(r.a.Component),R=(n(66),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).getRecipeIngredients=function(){n.setState({id:n.props.eachIng._id,ingInclude:n.props.eachIng.include,ingName:n.props.eachIng.name,ingUsAmount:n.props.eachIng.usAmount,ingUsUnit:n.props.eachIng.usUnit,ingMetAmount:n.props.eachIng.metricAmount,ingMetUnit:n.props.eachIng.metricUnit,ingCost:n.props.eachIng.price,ready:!1})},n.isReady=function(){n.setState({ready:!0})},n.checkBoxToggle=function(){n.cartService.toggleIngredient(n.state.id,n.state.ingInclude,n.props.recipeID).then(function(e){n.props.getUsersCart(),n.setState({ingInclude:!n.state.ingInclude}),n.props.updateRecipePrice(e.cost)})},n.ingredientCheckBox=function(){return n.state.ingInclude?r.a.createElement("input",{onChange:function(){return n.checkBoxToggle()},type:"checkbox",value:n.state.ingInclude,checked:"checked"}):r.a.createElement("input",{onChange:function(){return n.checkBoxToggle()},type:"checkbox",value:n.state.ingInclude,checked:""})},n.displayRecipeIngredients=function(){return r.a.createElement("div",{className:"ing-listing d-flex"},r.a.createElement("div",{className:"ing"},n.ingredientCheckBox()),r.a.createElement("div",{className:"ing ing-name"},n.state.ingName),r.a.createElement("div",{className:"ing ing-amount"},n.state.ingUsAmount),r.a.createElement("div",{className:"ing ing-unit"},n.state.ingUsUnit),r.a.createElement("div",{className:"ing ing-cost"},"$",n.state.ingCost.toFixed(2)))},n.cartService=new v,n.state={id:"",ingInclude:!1,ingName:"",ingUsAmount:0,ingUsUnit:"",ingMetAmount:0,ingMetUnit:"",ingCost:0},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getRecipeIngredients(),this.isReady()}},{key:"render",value:function(){return this.state.ready?r.a.createElement("div",{className:"ing-listing-container"},this.displayRecipeIngredients()):r.a.createElement("div",null,"Loading Recipe")}}]),t}(r.a.Component)),O=(n(67),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).updateRecipePrice=function(e){setTimeout(function(){n.setState({recipeTotal:e})},200)},n.displayRecipeIngredients=function(){return n.state.recipeIngredients.map(function(e){return r.a.createElement("div",{className:"ingredient-listing",key:e._id},r.a.createElement(R,{eachIng:e,recipeID:n.props.recipeInfo._id,updateRecipePrice:n.updateRecipePrice,getUsersCart:n.props.getUsersCart}))})},n.isReady=function(){n.setState({ready:!0})},n.state={recipeName:e.recipeInfo.name,recipeIngredients:e.recipeInfo.ingredients,recipeTotal:e.recipeInfo.cost,ready:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.isReady()}},{key:"render",value:function(){return this.state.ready?r.a.createElement("div",{className:"cart-recipe d-flex-col"},r.a.createElement("div",{className:"cart-recipe-header"},r.a.createElement("h3",null,this.state.recipeName)),r.a.createElement("div",{className:"cart-recipe-info d-flex-col"},this.displayRecipeIngredients()),r.a.createElement("span",{className:"d-flex"},r.a.createElement("div",{className:"ing-checkbox"}),r.a.createElement("div",{className:"ing-name"}),r.a.createElement("div",{className:"ing-amount"}),r.a.createElement("div",{className:"ing-unit"},"Total:"),r.a.createElement("div",{className:"ing-cost"},"$",this.state.recipeTotal.toFixed(2)))):r.a.createElement("div",null,"Loading Recipe")}}]),t}(r.a.Component)),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).getUsersCart=function(){n.cartService.grabUserAndCart().then(function(e){n.setState({cartRecipes:e.cart})})},n.isReady=function(){n.setState({ready:!0})},n.displayCartRecipes=function(){return n.state.cartRecipes.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(O,{recipeInfo:e,getUsersCart:n.getUsersCart}))})},n.checkout=function(){n.cartService.checkout()},n.state={cartIngredients:[],cartRecipes:[],ready:!1,cartTotal:0},n.cartService=new v,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getUsersCart(),this.isReady()}},{key:"render",value:function(){var e=this;return this.state.ready?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Total: ",this.state.cartTotal),r.a.createElement("button",{onClick:function(){e.checkout()}},"Checkout")),this.displayCartRecipes()):r.a.createElement("div",null,"Loading Cart")}}]),t}(r.a.Component),j=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.currentUser=function(){return t.service.get("/getcurrentuser").then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})};var n=d.a.create({baseURL:"/api/auth",withCredentials:!0});this.service=n},k=(n(68),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.tryToSignUp=function(e){e.preventDefault();var t=n.state.usernameInput,a=n.state.passwordInput;n.service.signup(t,a).then(function(){n.props.toggleForm("signup"),n.props.getUser()})},n.state={usernameInput:"",passwordInput:""},n.service=new j,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"signup-form",onSubmit:this.tryToSignUp},r.a.createElement("h3",null,"Signup For An Account"),r.a.createElement("legend",null,"Username"),r.a.createElement("input",{value:this.state.usernameInput,name:"usernameInput",onChange:this.handleChange}),r.a.createElement("legend",null,"Password"),r.a.createElement("input",{value:this.state.passwordInput,name:"passwordInput",onChange:this.handleChange}),r.a.createElement("button",null,"Submit"))}}]),t}(a.Component)),w=(n(69),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.tryToLogin=function(e){e.preventDefault();var t=n.state.usernameInput,a=n.state.passwordInput;n.service.login(t,a).then(function(){n.props.toggleForm("login"),n.props.getUser()})},n.state={usernameInput:"",passwordInput:""},n.service=new j,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"login-form",onSubmit:this.tryToLogin},r.a.createElement("h3",null,"Login"),r.a.createElement("legend",null,"Username"),r.a.createElement("input",{value:this.state.usernameInput,name:"usernameInput",onChange:this.handleChange}),r.a.createElement("legend",null,"Password"),r.a.createElement("input",{value:this.state.passwordInput,name:"passwordInput",onChange:this.handleChange}),r.a.createElement("button",null,"Submit"))}}]),t}(a.Component)),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(g.a)(t).call(this,e))).getCurrentlyLoggedInUser=function(){n.authService.currentUser().then(function(e){n.setState({currentlyLoggedIn:e})}).catch(function(){n.setState({currentlyLoggedIn:null})})},n.toggleForm=function(e){var t,a,r;"signup"===e?(a="signupShowing",r="loginShowing"):(a="loginShowing",r="signupShowing"),n.setState((t={},Object(s.a)(t,a,!n.state[a]),Object(s.a)(t,r,!1),t))},n.setCurrentRecipe=function(e){n.setState({currentRecipeID:e},function(){return console.log(n.state.currentRecipeID)})},n.state={signupShowing:!1,loginShowing:!1},n.foodService=new f,n.authService=new j,n.cartService=new v,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentlyLoggedInUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(E,{theUser:this.state.currentlyLoggedIn,pleaseLogOut:function(){return e.authService.logout()},getUser:this.getCurrentlyLoggedInUser,toggleForm:this.toggleForm}),this.state.signupShowing&&r.a.createElement(k,{getUser:this.getCurrentlyLoggedInUser,toggleForm:this.toggleForm}),this.state.loginShowing&&r.a.createElement(w,{getUser:this.getCurrentlyLoggedInUser,toggleForm:this.toggleForm}),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(C,{message:e.state.message})}}),r.a.createElement(h.a,{exact:!0,path:"/recipes/summary/:recipeID",render:function(t){return r.a.createElement(S,Object.assign({},t,{currentRecipeID:e.state.currentRecipeID,foodService:e.foodService,cartService:e.cartService,theUser:e.state.currentlyLoggedIn}))}}),r.a.createElement(h.a,{exact:!0,path:"/cart",render:function(e){return r.a.createElement(U,null)}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(I.a,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.19e0117e.chunk.js.map